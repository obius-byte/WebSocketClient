<!DOCTYPE html>
<html lang="en">
    <head>
        <title>WebSocket Client</title>
		<script src="ws-client.min.js"></script>
        <script>			
			const ws = new WebSocketClient();
			ws.useJSON(true)
			
			// instant connection
			/*(async () => {
				await ws.connect('ws://127.0.0.1:8006')
				ws.addEventListener('message', (e) => {
					const message = JSON.parse(e.data)			
					console.log('onmessage', message)
				});
			})();*/
			
			async function connect() {
				await ws.connect('ws://127.0.0.1:8006', 5000)
				ws.removeAllListener()
				ws.addEventListener('message', (e) => {
					const message = JSON.parse(e.data)			
					console.log('onmessage', message)
				});
			}
			
			function state() {
				console.log('isConnecting: ' + ws.isConnecting())
				console.log('isConnected: ' + ws.isConnected())
				console.log('isClosing: ' + ws.isClosing())
				console.log('isClosed: ' + ws.isClosed())
			}
			
			function send() {
				ws.send({ name: 'selectFolder' });
			}
			
			function disconnect() {
				ws.disconnect();
			}
        </script>
    </head>
    <body>
		<ul>
			<li><a href="#" onclick="connect()">Connect</a></li>
			<li><a href="#" onclick="send()">Send</a></li>
			<li><a href="#" onclick="disconnect()">Disconnect</a></li>
		</ul>
    </body>
</html>
